(()=>{var e={588:(e,t,n)=>{"use strict";let a={};var o;(o=n(106)).keys().forEach((e=>{let t=e.replace(/\.\/([^\/]+)\.js$/,"$1");a[t]=o(e).default}));const i=Object.freeze({process:(e,t,n,o)=>{t.forEach((t=>{let i=e[t];Object.keys(i).forEach((t=>{void 0!==a[t]&&a[t].update(e,i,n,o)}))}))}});let c={};(e=>{e.keys().forEach((t=>{let n=t.replace(/\.\/([^\/]+)\.js$/,"$1");c[n]=e(t).default}))})(n(293));let s={};(e=>{e.keys().forEach((t=>{let n=t.replace(/\.\/([^\/]+)\.js$/,"$1");s[n]=e(t).default}))})(n(98));const r=Object.freeze({process:(e,t,n)=>{t.forEach((t=>{let a=e[t];n.save(),n.scale(e.game.canvas.zoom,e.game.canvas.zoom),Object.keys(a).forEach((t=>{void 0!==s[t]&&s[t].transform(e,a,n)})),Object.keys(a).forEach((t=>{void 0!==c[t]&&c[t].draw(e,a,n)})),n.restore()}))}}),l=Object.freeze({add:(e,t)=>{if(void 0===e.canvas)return e;let n=0,a=1,o=1,i=i=>{clearTimeout(n),n=setTimeout((n=>{t.width=window.innerWidth*window.devicePixelRatio,t.height=window.innerHeight*window.devicePixelRatio,t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",e.canvas.w=t.width,e.canvas.h=t.height,a=e.canvas.tW/e.canvas.tH,o=e.canvas.w/e.canvas.h,a<o?(e.canvas.zoom=e.canvas.h/e.canvas.tH,e.canvas.gH=e.canvas.tH,e.canvas.gW=e.canvas.tH*e.canvas.w/e.canvas.h):(e.canvas.zoom=e.canvas.w/e.canvas.tW,e.canvas.gW=e.canvas.tW,e.canvas.gH=e.canvas.tW*e.canvas.h/e.canvas.w)}),40)};i(),window.addEventListener("resize",i)}}),d=Object.freeze({add:(e,t)=>{let n,a,o,i,c,s,r=e.pointer,l=(e,t)=>{r.x=e,r.y=t,r.justDown=!0,r.isDown=!0},d=(e,t)=>{r.x=e,r.y=t},v=(e,t)=>{r.x=e,r.y=t,r.justUp=!0,r.isDown=!1};t.addEventListener("mousedown",(r=>{n=t.getBoundingClientRect(),a=n.left,o=n.top,i=e.canvas.zoom/window.devicePixelRatio,c=(r.clientX-a)/i,s=(r.clientY-o)/i,l(c,s)})),t.addEventListener("touchstart",(r=>{r.preventDefault(),n=t.getBoundingClientRect(),a=n.left,o=n.top,i=e.canvas.zoom/window.devicePixelRatio,c=(r.changedTouches[0].clientX-a)/i,s=(r.changedTouches[0].clientY-o)/i,l(c,s)})),t.addEventListener("mousemove",(r=>{n=t.getBoundingClientRect(),a=n.left,o=n.top,i=e.canvas.zoom/window.devicePixelRatio,c=(r.clientX-a)/i,s=(r.clientY-o)/i,d(c,s)})),t.addEventListener("touchmove",(r=>{r.preventDefault(),n=t.getBoundingClientRect(),a=n.left,o=n.top,i=e.canvas.zoom/window.devicePixelRatio,c=(r.changedTouches[0].clientX-a)/i,s=(r.changedTouches[0].clientY-o)/i,d(c,s)})),t.addEventListener("mouseup",(r=>{n=t.getBoundingClientRect(),a=n.left,o=n.top,i=e.canvas.zoom/window.devicePixelRatio,c=(r.clientX-a)/i,s=(r.clientY-o)/i,v(c,s)})),t.addEventListener("touchend",(r=>{r.preventDefault(),n=t.getBoundingClientRect(),a=n.left,o=n.top,i=e.canvas.zoom/window.devicePixelRatio,c=r.changedTouches[0].clientX/i,s=r.changedTouches[0].clientY/i,v(c,s)}))}}),v=Object.freeze({setup:e=>{let t,n=e.game;if(void 0!==n.canvas){let e=document.createElement("canvas");t=e.getContext("2d");let a=document.querySelector(n.canvas.parentSelector);"body"===n.canvas.parentSelector?l.add(n,e):(e.width=n.canvas.w,e.height=n.canvas.h),a.appendChild(e);let o=document.querySelector("#loading");null!==o&&o.remove(),void 0!==n.pointer&&d.add(n,e)}if(void 0===n.statemachine||void 0===t)return;let a=0,o=0,c=s=>{o=s-a,a=s;let l=[],d=[];n.statemachine.active.forEach((t=>{let n=e[t];void 0!==n.state&&(l=[...l,...n.state.updates],d=[...d,...n.state.draws])})),i.process(e,l,s,o),void 0!==n.pointer&&(n.pointer.justDown=!1,n.pointer.justUp=!1),t.clearRect(0,0,n.canvas.w,n.canvas.h),r.process(e,d,t),requestAnimationFrame(c)};c(0)}}),u=JSON.parse('{"game":{"canvas":{"w":320,"h":320,"tW":320,"tH":320,"gW":320,"gH":320,"zoom":1,"parentSelector":"body"},"statemachine":{"active":["test"]},"pointer":{"x":0,"y":0,"justDown":false,"justUp":false,"isDown":false}},"bg":{"fillrect":{"fill":"#444444"}},"player":{"position":{"x":0,"y":0},"size":{"w":48,"h":48},"fillrect":{"fill":"white"}},"test":{"state":{"draws":["bg","player"],"updates":["player"]}}}');console.log(u),v.setup(u)},768:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=Object.freeze({draw:(e,t,n)=>{let a=e.game.canvas.gW,o=e.game.canvas.gH;void 0!==t.size&&(a=t.size.w,o=t.size.h),n.fillStyle=t.fillrect.fill,n.fillRect(0,0,a,o)}})},293:(e,t,n)=>{var a={"./fillrect.js":768};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id=293},130:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=Object.freeze({transform:(e,t,n)=>{void 0!==t.position&&n.translate(t.position.x,t.position.y)}})},98:(e,t,n)=>{var a={"./position.js":130};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id=98},106:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=106,e.exports=t}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(588)})();