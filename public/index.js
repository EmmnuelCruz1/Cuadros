(()=>{var e={895:(e,t,o)=>{var r={"./arrowdown.json":882,"./arrowleft.json":926,"./arrowright.json":166,"./arrowup.json":947,"./blackhole.json":761,"./blanksquare.json":492,"./canvas.json":961,"./fillrect.json":298,"./home.json":999,"./levels.json":387,"./pointer.json":865,"./position.json":43,"./puzzle.json":37,"./size.json":736,"./state.json":135,"./statemachine.json":94,"./xsquare.json":224};function s(e){var t=i(e);return o(t)}function i(e){if(!o.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=895},588:(e,t,o)=>{"use strict";let r={};var s;(s=o(106)).keys().forEach((e=>{let t=e.replace(/\.\/([^\/]+)\.js$/,"$1");r[t]=s(e).default}));const i=Object.freeze({process:(e,t,o,s)=>{t.forEach((t=>{let i=e[t];Object.keys(i).forEach((t=>{void 0!==r[t]&&r[t].update(e,i,o,s)}))}))}});let a={};(e=>{e.keys().forEach((t=>{let o=t.replace(/\.\/([^\/]+)\.js$/,"$1");a[o]=e(t).default}))})(o(293));let n={};(e=>{e.keys().forEach((t=>{let o=t.replace(/\.\/([^\/]+)\.js$/,"$1");n[o]=e(t).default}))})(o(98));const l=Object.freeze({process:(e,t,o)=>{t.forEach((t=>{let r=e[t];o.save(),o.scale(e.game.canvas.zoom,e.game.canvas.zoom),Object.keys(r).forEach((t=>{void 0!==n[t]&&n[t].transform(e,r,o)})),Object.keys(r).forEach((t=>{void 0!==a[t]&&a[t].draw(e,r,o)})),o.restore()}))}}),c=Object.freeze({add:(e,t)=>{if(void 0===e.canvas)return e;let o=0,r=1,s=1,i=i=>{clearTimeout(o),o=setTimeout((o=>{t.width=window.innerWidth*window.devicePixelRatio,t.height=window.innerHeight*window.devicePixelRatio,t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",e.canvas.w=t.width,e.canvas.h=t.height,r=e.canvas.tW/e.canvas.tH,s=e.canvas.w/e.canvas.h,r<s?(e.canvas.zoom=e.canvas.h/e.canvas.tH,e.canvas.gH=e.canvas.tH,e.canvas.gW=e.canvas.tH*e.canvas.w/e.canvas.h):(e.canvas.zoom=e.canvas.w/e.canvas.tW,e.canvas.gW=e.canvas.tW,e.canvas.gH=e.canvas.tW*e.canvas.h/e.canvas.w)}),40)};i(),window.addEventListener("resize",i)}}),u=Object.freeze({add:(e,t)=>{let o,r,s,i,a,n,l=e.pointer,c=(e,t)=>{l.x=e,l.y=t,l.justDown=!0,l.isDown=!0},u=(e,t)=>{l.x=e,l.y=t},d=(e,t)=>{l.x=e,l.y=t,l.justUp=!0,l.isDown=!1};t.addEventListener("mousedown",(l=>{o=t.getBoundingClientRect(),r=o.left,s=o.top,i=e.canvas.zoom/window.devicePixelRatio,a=(l.clientX-r)/i,n=(l.clientY-s)/i,c(a,n)})),t.addEventListener("touchstart",(l=>{l.preventDefault(),o=t.getBoundingClientRect(),r=o.left,s=o.top,i=e.canvas.zoom/window.devicePixelRatio,a=(l.changedTouches[0].clientX-r)/i,n=(l.changedTouches[0].clientY-s)/i,c(a,n)})),t.addEventListener("mousemove",(l=>{o=t.getBoundingClientRect(),r=o.left,s=o.top,i=e.canvas.zoom/window.devicePixelRatio,a=(l.clientX-r)/i,n=(l.clientY-s)/i,u(a,n)})),t.addEventListener("touchmove",(l=>{l.preventDefault(),o=t.getBoundingClientRect(),r=o.left,s=o.top,i=e.canvas.zoom/window.devicePixelRatio,a=(l.changedTouches[0].clientX-r)/i,n=(l.changedTouches[0].clientY-s)/i,u(a,n)})),t.addEventListener("mouseup",(l=>{o=t.getBoundingClientRect(),r=o.left,s=o.top,i=e.canvas.zoom/window.devicePixelRatio,a=(l.clientX-r)/i,n=(l.clientY-s)/i,d(a,n)})),t.addEventListener("touchend",(l=>{l.preventDefault(),o=t.getBoundingClientRect(),r=o.left,s=o.top,i=e.canvas.zoom/window.devicePixelRatio,a=l.changedTouches[0].clientX/i,n=l.changedTouches[0].clientY/i,d(a,n)}))}}),d=Object.freeze({setup:e=>{let t,o=e.game;if(void 0!==o.canvas){let e=document.createElement("canvas");t=e.getContext("2d");let r=document.querySelector(o.canvas.parentSelector);"body"===o.canvas.parentSelector?c.add(o,e):(e.width=o.canvas.w,e.height=o.canvas.h),r.appendChild(e);let s=document.querySelector("#loading");null!==s&&s.remove(),void 0!==o.pointer&&u.add(o,e)}if(void 0===o.statemachine||void 0===t)return;let r=0,s=0,a=n=>{s=n-r,r=n;let c=[],u=[];o.statemachine.active.forEach((t=>{let o=e[t];void 0!==o.state&&(c=[...c,...o.state.updates],u=[...u,...o.state.draws])})),i.process(e,c,n,s),void 0!==o.pointer&&(o.pointer.justDown=!1,o.pointer.justUp=!1),t.clearRect(0,0,o.canvas.w,o.canvas.h),l.process(e,u,t),requestAnimationFrame(a)};a(0)}}),p=JSON.parse('{"game":{"canvas":{"w":320,"h":320,"tW":320,"tH":320,"gW":320,"gH":320,"zoom":1,"parentSelector":"body"},"statemachine":{"active":["level"]},"pointer":{"x":0,"y":0,"justDown":false,"justUp":false,"isDown":false},"levels":{"sequence":["groundzero","learnpush","firsttest","breakflow","timebreak"],"current":0}},"firsttest":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,6,0,0,5,2,0,0,0,0,0,1,2,7,0,0,0,5,0,1,0,0,0,0,0,0,0],"init":true}},"learnpush":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"init":true}},"groundzero":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"init":true}},"breakflow":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,0,0,0,0,2,0,0,0,0,0,3,7,0,0,0,0,1,0,0,0,0,0,0,0,0,0],"init":true}},"timebreak":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,5,2,3,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0],"init":true}},"level":{"state":{"draws":[],"updates":["groundzero"]}}}');d.setup(p)},988:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,o)=>{let r=t.size.w,s=t.size.h;o.fillStyle="white",o.fillRect(0,0,r,s),o.strokeStyle="black",o.beginPath(),o.moveTo(6,24),o.lineTo(24,42),o.lineTo(42,24),o.stroke()}})},702:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,o)=>{let r=t.size.w,s=t.size.h;o.fillStyle="white",o.fillRect(0,0,r,s),o.strokeStyle="black",o.beginPath(),o.moveTo(24,6),o.lineTo(6,24),o.lineTo(24,42),o.stroke()}})},515:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,o)=>{let r=t.size.w,s=t.size.h;o.fillStyle="white",o.fillRect(0,0,r,s),o.strokeStyle="black",o.beginPath(),o.moveTo(24,6),o.lineTo(42,24),o.lineTo(24,42),o.stroke()}})},666:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,o)=>{let r=t.size.w,s=t.size.h;o.fillStyle="white",o.fillRect(0,0,r,s),o.strokeStyle="black",o.beginPath(),o.moveTo(6,24),o.lineTo(24,6),o.lineTo(42,24),o.stroke()}})},622:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,o)=>{let r=t.size.w,s=t.size.h;o.fillStyle="black",o.fillRect(0,0,r,s)}})},657:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,o)=>{let r=t.size.w,s=t.size.h;o.fillStyle="white",o.fillRect(0,0,r,s)}})},768:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,o)=>{let r=e.game.canvas.gW,s=e.game.canvas.gH;void 0!==t.size&&(r=t.size.w,s=t.size.h),o.fillStyle=t.fillrect.fill,o.fillRect(0,0,r,s)}})},104:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,o)=>{let r=t.size.w,s=t.size.h;o.fillStyle="white",o.fillRect(0,0,r,s),o.strokeStyle="black",o.beginPath(),o.moveTo(6,6),o.lineTo(42,42),o.moveTo(6,42),o.lineTo(42,6),o.stroke()}})},293:(e,t,o)=>{var r={"./arrowdown.js":988,"./arrowleft.js":702,"./arrowright.js":515,"./arrowup.js":666,"./blackhole.js":622,"./blanksquare.js":657,"./fillrect.js":768,"./xsquare.js":104};function s(e){var t=i(e);return o(t)}function i(e){if(!o.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=293},130:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({transform:(e,t,o)=>{let r=0,s=0;if("game"===t.position.origin){let t=e.game.canvas;r=(t.gW-t.tW)/2,s=(t.gH-t.tH)/2}o.translate(t.position.x+r,t.position.y+s)}})},98:(e,t,o)=>{var r={"./position.js":130};function s(e){var t=i(e);return o(t)}function i(e){if(!o.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=98},189:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});const r=Object.freeze({update:(e,t,o,r)=>{void 0!==t.position&&(t.position.x=t.position.x+(t.home.x-t.position.x)/4*r/17,Math.abs(t.home.x-t.position.x)<1/e.game.canvas.zoom&&(t.position.x=t.home.x),t.position.y=t.position.y+(t.home.y-t.position.y)/4*r/17,Math.abs(t.home.y-t.position.y)<1/e.game.canvas.zoom&&(t.position.y=t.home.y))}})},282:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});let r={};var s;(s=o(895)).keys().forEach((e=>{let t=e.replace(/\.\/(.+)\.json$/,"$1");r[t]=s(e)}));const i=Object.freeze({add:(e,t)=>(e[t]=JSON.parse(JSON.stringify(r[t])),e)}),a=Object.freeze({add:(e,t,...o)=>{let r={};return o.forEach((e=>{i.add(r,e)})),e[t]=r,r}});let n=[["position","size","home"],["position","size","home","blackhole"],["position","size","home","blanksquare"],["position","size","home","xsquare"],["position","size","home","arrowup"],["position","size","home","arrowright"],["position","size","home","arrowdown"],["position","size","home","arrowleft"],["position","size","home","fillrect"]];const l=Object.freeze({update:(e,t,o,r)=>{if(!0===t.puzzle.init){t.puzzle.init=!1;let o=e.level.state;t.puzzle.grid.forEach(((t,r)=>{let s=r%6,i=r/6|0,l="piece"+r,c=a.add(e,l,...n[t]);c.position.x=c.home.x=16+48*s,c.position.y=c.home.y=16+48*i,o.draws.push(l),o.updates.push(l);let u="top"+r,d=a.add(e,u,...n[0]);d.position.x=d.home.x=16+48*s,d.position.y=d.home.y=16+48*i,o.draws.push(u),o.updates.push(u)})),console.log(e)}if(!0===e.game.pointer.justUp){let o=e.game.pointer.x-16-(e.game.canvas.gW-e.game.canvas.tW)/2,r=e.game.pointer.y-16-(e.game.canvas.gH-e.game.canvas.tH)/2;if(o<0||o>288||r<0||r>288)return;o=o/48|0,r=r/48|0;let s=o+6*r,i={arrowup:e=>{a(-6,35,0)},arrowright:e=>{a(1,s+(5-s%6),s-s%6)},arrowdown:e=>{a(6,35,0)},arrowleft:e=>{a(-1,s+(5-s%6),s-s%6)},xsquare:t=>{delete e["piece"+s].xsquare}},a=(t,o,r)=>{let i=e["piece"+s],a=s,n=[],l=!1;for(;!l;){if(i=e["piece"+a],!["blanksquare","xsquare","arrowup","arrowright","arrowdown","arrowleft"].some((e=>void 0!==i[e]))){void 0!==i.blackhole?n.unshift("top"+a):(n.unshift("top"+a),n.push("piece"+a)),l=!0;break}n.unshift("top"+a),n.push("piece"+a),a+=t,(a>o||a<r)&&(n=[],l=!0)}if(n.length<1)return;let c,u,d=n.shift(),p=e[d],f=p.home;n.forEach((t=>{u=e[t],c=u.home,e[t]=p,e[t].home=c,p=u})),e[d]=p,e[d].home=f,["blanksquare","xsquare","arrowup","arrowright","arrowdown","arrowleft"].forEach((t=>{delete e[d][t]}))},n=e["piece"+s];Object.keys(i).forEach((o=>{if(n[o])if(i[o](),t.puzzle.grid.some(((t,o)=>["blanksquare","xsquare","arrowup","arrowright","arrowdown","arrowleft"].some((t=>void 0!==e["piece"+o][t]))))){if(!t.puzzle.grid.some(((t,o)=>["xsquare","arrowup","arrowright","arrowdown","arrowleft"].some((t=>void 0!==e["piece"+o][t]))))){let t=e.game.levels,o=t.sequence[t.current];e[o].puzzle.init=!0;let r=e.level.state;r.updates=[o],r.draws=[]}}else{let t=e.game.levels;t.current=(t.current+1)%t.sequence.length;let o=t.sequence[t.current];e[o].puzzle.init=!0;let r=e.level.state;r.updates=[o],r.draws=[]}}))}}})},106:(e,t,o)=>{var r={"./home.js":189,"./puzzle.js":282};function s(e){var t=i(e);return o(t)}function i(e){if(!o.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=106},882:e=>{"use strict";e.exports={}},926:e=>{"use strict";e.exports={}},166:e=>{"use strict";e.exports={}},947:e=>{"use strict";e.exports={}},761:e=>{"use strict";e.exports={}},492:e=>{"use strict";e.exports={}},961:e=>{"use strict";e.exports=JSON.parse('{"w":320,"h":320,"tW":320,"tH":320,"gW":320,"gH":320,"zoom":1,"parentSelector":"body"}')},298:e=>{"use strict";e.exports={fill:"tomato"}},999:e=>{"use strict";e.exports={x:0,y:0}},387:e=>{"use strict";e.exports=JSON.parse('{"sequence":[],"current":0}')},865:e=>{"use strict";e.exports=JSON.parse('{"x":0,"y":0,"justDown":false,"justUp":false,"isDown":false}')},43:e=>{"use strict";e.exports=JSON.parse('{"x":0,"y":0,"origin":"game"}')},37:e=>{"use strict";e.exports=JSON.parse('{"grid":[],"init":false}')},736:e=>{"use strict";e.exports={w:48,h:48}},135:e=>{"use strict";e.exports=JSON.parse('{"draws":[],"updates":[]}')},94:e=>{"use strict";e.exports={active:[]}},224:e=>{"use strict";e.exports={}}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(588)})();