<!doctype html><html><head><meta charset="utf-8"><title>Black Hole Square</title><meta name="description" content="Clean the universe!"><meta name="author" content="Quinten"><meta name="monetization" content="$ilp.uphold.com/N3GyWXpENLq4"><meta name="viewport" content="initial-scale=1,width=device-width"><link rel="manifest" href="manifest.json"><meta name="theme-color" content="#0E181B"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="icon" type="image/png" href="icon.png"><link rel="apple-touch-icon" href="icon.png"><style>body{background-color:#0E181B;margin:0;}canvas{display:block;}</style></head><body><script>(()=>{var e={895:(e,t,a)=>{var r={"./arrowdown.json":882,"./arrowleft.json":926,"./arrowright.json":166,"./arrowup.json":947,"./bgcut.json":192,"./blackhole.json":761,"./blanksquare.json":492,"./canvas.json":961,"./fillrect.json":298,"./home.json":999,"./levels.json":387,"./mask.json":726,"./neutronstar.json":318,"./pointer.json":865,"./position.json":43,"./puzzle.json":37,"./size.json":736,"./state.json":135,"./statemachine.json":94,"./text.json":54,"./tunnel.json":893,"./xsquare.json":224};function o(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=895},588:(e,t,a)=>{"use strict";let r={};var o;(o=a(106)).keys().forEach((e=>{let t=e.replace(/\.\/([^\/]+)\.js$/,"$1");r[t]=o(e).default}));const s=Object.freeze({process:(e,t,a,o)=>{t.forEach((t=>{let s=e[t];Object.keys(s).forEach((t=>{void 0!==r[t]&&r[t].update(e,s,a,o)}))}))}});let n={};(e=>{e.keys().forEach((t=>{let a=t.replace(/\.\/([^\/]+)\.js$/,"$1");n[a]=e(t).default}))})(a(293));let i={};(e=>{e.keys().forEach((t=>{let a=t.replace(/\.\/([^\/]+)\.js$/,"$1");i[a]=e(t).default}))})(a(98));const l=Object.freeze({process:(e,t,a)=>{t.forEach((t=>{let r=e[t];a.save(),a.scale(e.game.canvas.zoom,e.game.canvas.zoom),Object.keys(r).forEach((t=>{void 0!==i[t]&&i[t].transform(e,r,a)})),Object.keys(r).forEach((t=>{void 0!==n[t]&&n[t].draw(e,r,a)})),a.restore()}))}});let c=1,u=1,d=0,p=0,f=0,g=0;const h=Object.freeze({resize:(e,t)=>{f===window.innerWidth&&g===window.innerHeight||(f=window.innerWidth,g=window.innerHeight,t.style.width=f+"px",t.style.height=g+"px",t.width=f*window.devicePixelRatio,t.height=g*window.devicePixelRatio,e.canvas.w=t.width,e.canvas.h=t.height,c=e.canvas.tW/e.canvas.tH,u=e.canvas.w/e.canvas.h,c<u?(e.canvas.zoom=e.canvas.h/e.canvas.tH,e.canvas.gH=e.canvas.tH,e.canvas.gW=e.canvas.tH*e.canvas.w/e.canvas.h):(e.canvas.zoom=e.canvas.w/e.canvas.tW,e.canvas.gW=e.canvas.tW,e.canvas.gH=e.canvas.tW*e.canvas.h/e.canvas.w),d=(e.canvas.gW-e.canvas.tW)/2,p=(e.canvas.gH-e.canvas.tH)/2,e.canvas.gX=d,e.canvas.gY=p)}});var v=a(378);const m=Object.freeze({add:(e,t)=>{let a,r,o,s,n,i,l=e.pointer,c=(e,t)=>{l.x=e,l.y=t,l.downX=e,l.downY=t,l.justDown=!0,l.isDown=!0},u=(e,t)=>{l.x=e,l.y=t},d=(e,t)=>{l.x=e,l.y=t,l.justUp=!0,l.isDown=!1};t.addEventListener("mousedown",(l=>{a=t.getBoundingClientRect(),r=a.left,o=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.clientX-r)/s,i=(l.clientY-o)/s,c(n,i)})),t.addEventListener("touchstart",(l=>{l.preventDefault(),a=t.getBoundingClientRect(),r=a.left,o=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.changedTouches[0].clientX-r)/s,i=(l.changedTouches[0].clientY-o)/s,c(n,i),v.Z.playSong({melody:["8-"]})})),t.addEventListener("mousemove",(l=>{a=t.getBoundingClientRect(),r=a.left,o=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.clientX-r)/s,i=(l.clientY-o)/s,u(n,i)})),t.addEventListener("touchmove",(l=>{l.preventDefault(),a=t.getBoundingClientRect(),r=a.left,o=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.changedTouches[0].clientX-r)/s,i=(l.changedTouches[0].clientY-o)/s,u(n,i)})),t.addEventListener("mouseup",(l=>{a=t.getBoundingClientRect(),r=a.left,o=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.clientX-r)/s,i=(l.clientY-o)/s,d(n,i)})),t.addEventListener("touchend",(l=>{l.preventDefault(),a=t.getBoundingClientRect(),r=a.left,o=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=l.changedTouches[0].clientX/s,i=l.changedTouches[0].clientY/s,d(n,i)}))}});var w=a(520);document.monetization&&document.monetization.addEventListener("monetizationstart",(e=>{w.Z.save("payed",!0)}));const z=Object.freeze({setup:e=>{let t,a=e.game,r=document.createElement("canvas");t=r.getContext("2d");let o=document.querySelector(a.canvas.parentSelector);h.resize(a,r),o.appendChild(r),m.add(a,r);let n=0,i=0,c=o=>{i=o-n,n=o,h.resize(a,r);let u=[],d=[];a.statemachine.active.forEach((t=>{let a=e[t];void 0!==a.state&&(u=[...u,...a.state.updates],d=[...d,...a.state.draws])})),s.process(e,u,o,i),a.pointer.justDown=!1,a.pointer.justUp=!1,t.clearRect(0,0,a.canvas.w,a.canvas.h),l.process(e,d,t),requestAnimationFrame(c)};c(0)}}),x=JSON.parse('{"game":{"canvas":{"w":320,"h":416,"tW":320,"tH":416,"gW":320,"gH":416,"oX":0,"oY":48,"gX":2560,"gY":48,"zoom":1,"parentSelector":"body"},"statemachine":{"active":["level","controls"]},"pointer":{"x":0,"y":0,"justDown":false,"justUp":false,"isDown":false},"levels":{"sequence":["idiotscreen","startscreen","learnarrows","waitforme","learnpush","learnmoves","firsttest","backtoback","groundzero","breakflow","timebreak","ad","movex","xintohole","shoveit","end","orisit"],"coil":["idiotscreen","startscreen","learnarrows","waitforme","learnpush","learnmoves","firsttest","backtoback","groundzero","breakflow","timebreak","movex","xintohole","shoveit","ty","firstneutron","backandforth","circularneutron","horses","end","orisit"],"current":1}},"idiotscreen":{"puzzle":{"grid":[],"init":true,"taps":"","text":["You swiped right!","","Swipe left, please."],"lT":"Still wrong","rT":"Almost"}},"startscreen":{"puzzle":{"grid":[],"init":true,"taps":"","text":["Welcome to Black Hole Square!","Clean up all the other squares","in the universe! Just tap them","and see what happens.","","Swipe right to reset the level","or go back to the old ones.","Swipe left to skip a level.","","Swipe left to get started!"],"lT":"Wrong way","rT":"Let\'s go!"}},"ad":{"puzzle":{"grid":[],"init":true,"taps":"","text":["Did you know Coil subscribers","get 4 bonus levels?","","Swipe left to skip this info"]}},"ty":{"puzzle":{"grid":[],"init":true,"taps":"","text":["Thank you for supporting","this game through Coil.","","The next levels are only","for Coil subscribers.","","Swipe left for bonus levels"]}},"end":{"puzzle":{"grid":[],"init":true,"taps":"","text":["The edge of the universe..."],"rT":"Darkness"}},"orisit":{"puzzle":{"grid":[],"init":true,"taps":"","text":["Or is it?"],"lT":"Darkness","rT":"Cold"}},"firsttest":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,0,0,0,5,2,0,1,0,0,0,1,2,0,0,0,0,0,1,0,0,0,0,0,0,0,0],"init":true,"taps":6}},"learnmoves":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,0,0,0,0,2,0,0,0,0,1,2,2,7,0,0,0,1,0,0,0,0,0,0,0,0,0],"init":true,"taps":5}},"learnarrows":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,5,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,7,0,0,0,0,0,0,0,0],"init":true,"taps":4}},"waitforme":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,5,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],"init":true,"taps":5}},"learnpush":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,2,0,0,0,5,0,0,1,0,0,0,4,0,0,0,0,0,0,0,0,0],"init":true,"taps":6}},"groundzero":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"init":true,"taps":2}},"breakflow":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,0,0,0,0,2,0,0,0,0,0,3,7,0,0,0,0,1,0,0,0,0,0,0,0,0,0],"init":true,"taps":5}},"timebreak":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,2,0,5,3,2,2,2,1,0,0,0,4,0,0,0,0,0,0,0,0],"init":true,"taps":9}},"xintohole":{"puzzle":{"grid":[0,0,0,0,0,0,0,6,1,6,1,0,5,2,3,3,2,1,0,1,4,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0],"init":true,"taps":9}},"movex":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,1,0,0,0,0,5,2,0,0,0,0,0,3,7,0,0,0,1,2,3,7,0,0,0,4,0,0,0],"init":true,"taps":11}},"backtoback":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,0,0,1,5,0,0,0,0,0,0,0,0,7,1,0,0,0,4,0,0,0,0,0,0,0,0],"init":true,"taps":10}},"shoveit":{"puzzle":{"grid":[0,0,0,0,0,0,5,5,5,3,1,0,0,0,3,2,7,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"init":true,"taps":14}},"backandforth":{"puzzle":{"grid":[0,0,0,0,0,0,0,6,0,0,0,0,0,5,3,3,7,0,0,0,0,0,8,0,0,0,0,0,4,0,0,0,0,0,0,0],"init":true,"taps":12}},"horses":{"puzzle":{"grid":[0,6,0,0,6,0,0,2,0,0,8,0,0,0,3,7,0,0,0,0,5,5,0,0,8,0,0,0,0,2,4,0,0,0,0,4],"init":true,"taps":20}},"firstneutron":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,8,0,0,0,0,5,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],"init":true,"taps":6}},"circularneutron":{"puzzle":{"grid":[0,0,6,0,0,0,0,0,6,8,0,0,0,0,0,0,3,7,5,2,0,0,0,0,0,0,0,8,0,0,0,0,0,4,0,0],"init":true,"taps":14}},"level":{"state":{"draws":[],"updates":["startscreen"]}},"controls":{"state":{"draws":["bgcut","bgout","feedback","tunnel","tapstext","progress"],"updates":[]}},"tapstext":{"position":{"x":24,"y":44,"origin":"game"},"text":{"text":""}},"feedback":{"position":{"x":0,"y":0,"origin":"center"},"text":{"text":"","align":"center","behind":true,"base":"middle"}},"bgcut":{"position":{"x":16,"y":64,"origin":"game"},"bgcut":{"fill":"#1F363D"}},"bgout":{"position":{"x":16,"y":68,"origin":"game"},"bgcut":{"fill":"#16272C"}},"tunnel":{"tunnel":{"fill":"#16272C"}},"progress":{"position":{"x":0,"y":160,"origin":"center"},"progress":{}}}');let b=w.Z.load("current");if(void 0!==b){x.game.levels.current=b;let e=(w.Z.load("payed")?x.game.levels.coil:x.game.levels.sequence)[b];x.level.state.updates=[e]}z.setup(x),"serviceWorker"in navigator&&window.addEventListener("load",(e=>{navigator.serviceWorker.register("./sw.js").then((e=>{}),(e=>{}))}))},520:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const r=JSON.parse('{"u2":"Black Hole Square"}');let o={},s=localStorage.getItem(r.u2+" Data");null!==s&&(o=JSON.parse(s));const n=Object.freeze({save:(e,t)=>{o[e]=t,localStorage.setItem(r.u2+" Data",JSON.stringify(o))},load:e=>o[e]})},988:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(657);const o=Object.freeze({draw:(e,t,a)=>{r.default.draw(e,t,a);let o=new Path2D("M24 25.757l-9.879-9.878a3 3 0 00-4.242 4.242l12 12 .027.028a3.003 3.003 0 003.323.588l.034-.015.034-.016.033-.016.033-.017.032-.017.033-.017.032-.018.033-.018.032-.019.031-.019.032-.019.032-.02.031-.021.031-.02.031-.022.031-.021.03-.022.03-.023.03-.023.03-.023.03-.024.029-.024.029-.025.029-.025.028-.025.029-.026.028-.027.028-.026.027-.028 12-12a3 3 0 00-4.242-4.242L24 25.757z");a.fillStyle="#878e88",a.fill(o)}})},702:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(657);const o=Object.freeze({draw:(e,t,a)=>{r.default.draw(e,t,a);let o=new Path2D("M13.879 19.879l-.028.027a3.003 3.003 0 00-.49 3.521l.018.033.018.033.019.032.019.031.019.032.02.032.021.031.02.031.022.031.021.031.022.03.023.03.023.03.023.03.024.03.024.029.025.029.025.029.025.028.026.029.027.028.026.028.028.027 12 12a3 3 0 004.242-4.242L20.243 22l9.878-9.879a3 3 0 00-4.242-4.242l-12 12z");a.fillStyle="#878e88",a.fill(o)}})},515:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(657);const o=Object.freeze({draw:(e,t,a)=>{r.default.draw(e,t,a);let o=new Path2D("M27.757 22l-9.878 9.879a3 3 0 004.242 4.242l12-12a3 3 0 00.364-3.802l-.022-.032-.021-.031-.022-.03-.023-.03-.023-.03-.023-.03-.024-.03-.024-.029-.025-.029-.025-.029-.025-.028-.026-.029-.027-.028-.026-.028-.028-.027-12-12a3 3 0 00-4.242 4.242L27.757 22z");a.fillStyle="#878e88",a.fill(o)}})},666:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(657);const o=Object.freeze({draw:(e,t,a)=>{r.default.draw(e,t,a);let o=new Path2D("M22.507 11.397l-.035.021-.028.017-.032.019-.032.02-.031.021-.031.02-.031.022-.031.021-.03.022-.03.023-.03.023-.03.023-.03.024-.029.024-.029.025-.029.025-.028.025-.029.026-.028.027-.028.026-.027.028-12 12a3 3 0 004.242 4.242L24 18.243l9.879 9.878a3 3 0 004.242-4.242l-12-12a3.002 3.002 0 00-3.614-.482z");a.fillStyle="#878e88",a.fill(o)}})},833:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,a)=>{a.globalCompositeOperation="destination-over";let r=new Path2D("M6 288h276c3.311 0 6-2.689 6-6V6c0-3.311-2.689-6-6-6H6C2.689 0 0 2.689 0 6v276c0 3.311 2.689 6 6 6z");a.fillStyle=t.bgcut.fill,a.fill(r)}})},622:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,a)=>{let r=new Path2D("M44 12c0-3.311-2.689-6-6-6H10c-3.311 0-6 2.689-6 6v28c0 3.311 2.689 6 6 6h28c3.311 0 6-2.689 6-6V12z");a.fillStyle="#000",a.fill(r),r=new Path2D("M4 16c0-3.311 2.689-6 6-6h28c3.311 0 6 2.689 6 6v-4c0-3.311-2.689-6-6-6H10c-3.311 0-6 2.689-6 6v4z"),a.fillStyle="#16272C",a.fill(r)}})},657:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,a)=>{let r=t.clicked?"#85B3C1":"#c3dad5",o=t.clicked?"#A0C4CF":"#f2f7f6",s=new Path2D("M44 12c0-3.311-2.689-6-6-6H10c-3.311 0-6 2.689-6 6v28c0 3.311 2.689 6 6 6h28c3.311 0 6-2.689 6-6V12z");a.fillStyle=r,a.fill(s),s=new Path2D("M44 8c0-3.311-2.689-6-6-6H10C6.689 2 4 4.689 4 8v28c0 3.311 2.689 6 6 6h28c3.311 0 6-2.689 6-6V8z"),a.fillStyle=o,a.fill(s),t.clicked&&(t.clicked=t.clicked-1)}})},768:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,a)=>{let r=e.game.canvas.gW,o=e.game.canvas.gH;void 0!==t.size&&(r=t.size.w,o=t.size.h),a.fillStyle=t.fillrect.fill,a.fillRect(0,0,r,o)}})},47:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(657);const o=Object.freeze({draw:(e,t,a)=>{r.default.draw(e,t,a);let o=new Path2D("M39 14.5c0-4.14-3.36-7.5-7.5-7.5h-15C12.36 7 9 10.36 9 14.5v15c0 4.14 3.36 7.5 7.5 7.5h15c4.14 0 7.5-3.36 7.5-7.5v-15z");a.fillStyle="#878e88",a.fill(o)}})},473:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(520);let o=[(e,t)=>[e.fillStyle="#4B8495",e.fillRect(t,0,8,8)],(e,t)=>[e.strokeStyle="#4B8495",e.strokeRect(t+.5,.5,7,7)],(e,t)=>[e.fillStyle="#F2F7F6",e.fillRect(t,0,8,8)],(e,t)=>[e.strokeStyle="#F2F7F6",e.strokeRect(t+.5,.5,7,7)]];const s=Object.freeze({draw:(e,t,a)=>{let s=r.Z.load("solved")||[],n=r.Z.load("payed")?e.game.levels.coil:e.game.levels.sequence,i=n[e.game.levels.current],l=[];n.forEach((t=>{if(e[t].puzzle.grid.length){let e=0;s.indexOf(t)>-1&&(e+=1),t===i&&(e+=2),l.push(e)}})),l.forEach(((e,t)=>{o[e](a,12*t-6*l.length)}))}})},264:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});const r=Object.freeze({draw:(e,t,a)=>{t.text.behind&&(a.globalCompositeOperation="destination-over"),a.textAlign=t.text.align||"left",a.textBaseline=t.text.base||"top",a.fillStyle="#f2f7f6",a.font="14px monospace",a.fillText(t.text.text,0,0)}})},339:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let r=400,o=[];for(let e=0;e<42;e++){let e={start:Math.random()*r*7,length:r+Math.random()*r*2,rotation:Math.random()*Math.PI*2};o.push(e)}const s=Object.freeze({draw:(e,t,a)=>{a.globalCompositeOperation="destination-over",a.fillStyle=t.tunnel.fill,o.forEach((t=>{t.start-=8,t.start<-398&&(t.length=200+Math.random()*r/2,t.start=t.start+3200,t.rotation=Math.random()*Math.PI*2),t.rotation=t.rotation+-.005;let o=[{x:-4,y:80,z:t.start},{x:4,y:80,z:t.start},{x:4,y:80,z:Math.max(t.start-t.length,-399)},{x:-4,y:80,z:Math.max(t.start-t.length,-399)}],s=[];o.forEach((a=>{let[o,n]=((e,t,a,r=Math.cos(a),o=Math.sin(a))=>[r*e-o*t,o*e+r*t])(a.x,a.y,t.rotation);s.push(...((e,t,a,r,o,s,n=1,i=a/(a+s)*n)=>[e+r*i,t+o*i])(e.game.canvas.gW/2,e.game.canvas.gH/2,r,o,n,a.z))})),((e,t,a,r,o,s,n,i,l)=>{e.beginPath(),e.moveTo(t,a),e.lineTo(r,o),e.lineTo(s,n),e.lineTo(i,l),e.closePath(),e.fill()})(a,...s)}))}})},104:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(657);const o=Object.freeze({draw:(e,t,a)=>{r.default.draw(e,t,a);let o=new Path2D("M24 17.757l-9.879-9.878a3 3 0 00-4.242 4.242L19.757 22l-9.878 9.879a3 3 0 004.242 4.242L24 26.243l9.879 9.878a3 3 0 004.242-4.242L28.243 22l9.878-9.879a3 3 0 00-4.242-4.242L24 17.757z");a.fillStyle="#878e88",a.fill(o)}})},293:(e,t,a)=>{var r={"./arrowdown.js":988,"./arrowleft.js":702,"./arrowright.js":515,"./arrowup.js":666,"./bgcut.js":833,"./blackhole.js":622,"./blanksquare.js":657,"./fillrect.js":768,"./neutronstar.js":47,"./progress.js":473,"./text.js":264,"./tunnel.js":339,"./xsquare.js":104};function o(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=293},378:(e,t,a)=>{"use strict";let r,o,s,n,i,l,c;a.d(t,{Z:()=>d});let u=0;const d=Object.freeze({playSong:(e={})=>{let t=(e,t,a,r=120,o="triangle")=>{if("closed"===e.context.state)return;let s=t.replace(/\d/g,""),n=t.match(/^\d+/g);n=n?+n[0]:4;let i=t.match(/\d+$/g);i=i?+i[0]:4;let l=15/r*n,c="AbBCdDeEFgGa".indexOf(s);if(-1===c)return l;let u=100*c+1200*(i-4),d=e.context.createOscillator();return d.connect(e),d.frequency.value=440,d.detune.value=u,d.type=o,e.gain.setValueAtTime(0,a),e.gain.linearRampToValueAtTime(.6,a+.03*l),e.gain.setValueAtTime(.56,a+.24*l),e.gain.setValueAtTime(.55,a+.3*l),e.gain.linearRampToValueAtTime(0,a+1.5*l),d.start(a),d.stop(a+1.5*l),l},{melody:a,bass:d,bpm:p=256,loop:f=!1}=e,g=!a,h=!d;if(void 0===r||"running"!==r.state){if(r=new AudioContext,/(iPhone|iPad)/i.test(navigator.userAgent)&&48e3!==r.sampleRate){let e=r.createBuffer(1,1,48e3),t=r.createBufferSource();t.buffer=e,t.connect(r.destination),t.start(0),t.disconnect(),r.close(),r=new AudioContext}s=r.createBiquadFilter(),s.connect(r.destination),s.type="lowpass",s.frequency.value=920,n=r.createGain(),n.connect(s),n.gain.value=.8,i=r.createDelay(60/p),i.delayTime.value=60/p,l=r.createGain(),l.gain.value=.25,i.connect(l),l.connect(i),c=r.createGain(),c.gain.value=.5,c.connect(n),i.connect(c),o=[0,1,2,3,4,5,6,7].map((()=>{let e=r.createGain();return e.connect(n),e.connect(i),e}))}let v=0,m=0,w=0,z=0,x=60/p*7,b=0,y=()=>{if("closed"!==r.state&&!(0!==b&&r.currentTime>b)){for((!g&&r.currentTime>m+.35||!h&&r.currentTime>z+.35)&&(v=0,w=0,m=z=r.currentTime);!g&&m<r.currentTime+x;){let e=t(o[u],a[v],m,p);u=(u+1)%o.length,v=(v+1)%a.length,m+=e,0===v&&(f||(g=!0)),b=b<m+x?m+x:b}for(;!h&&z<r.currentTime+x;){let e=t(o[u],d[w],z,p);u=(u+1)%o.length,w=(w+1)%d.length,z+=e,0===w&&(f||(h=!0)),b=b<z+x?z+x:b}requestAnimationFrame(y)}};return y(),r}})},272:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});const r=Object.freeze({transform:(e,t,a)=>{a.globalCompositeOperation="source-atop"}})},130:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});const r=Object.freeze({transform:(e,t,a)=>{let r=0,o=0;if("game"===t.position.origin){let t=e.game.canvas;r=t.oX,o=t.oY}if("center"===t.position.origin){let t=e.game.canvas;r=t.gW/2,o=t.gH/2}a.translate(t.position.x+r,t.position.y+o)}})},98:(e,t,a)=>{var r={"./mask.js":272,"./position.js":130};function o(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=98},189:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});const r=Object.freeze({update:(e,t,a,r)=>{if(void 0!==t.position){t.position.x=t.position.x+(t.home.x-t.position.x)/3*r/17,Math.abs(t.home.x-t.position.x)<1/e.game.canvas.zoom&&(t.position.x=t.home.x);let a=t.home.y;t.home.drop&&(a+=48),t.position.y=t.position.y+(a-t.position.y)/3*r/17,Math.abs(a-t.position.y)<1/e.game.canvas.zoom&&(t.position.y=a,t.home.drop&&(delete t.mask,["blanksquare","xsquare","arrowup","arrowright","arrowdown","arrowleft","neutronstar"].forEach((e=>{delete t[e]})),t.home.drop=!1)),t.position.x===t.home.x&&t.position.y===t.home.y&&t.home.suck&&(t.mask={},t.home.suck=!1,t.home.drop=!0)}}})},282:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});let r={};var o;(o=a(895)).keys().forEach((e=>{let t=e.replace(/\.\/(.+)\.json$/,"$1");r[t]=o(e)}));const s=Object.freeze({add:(e,t)=>(e[t]=JSON.parse(JSON.stringify(r[t])),e)}),n=Object.freeze({add:(e,t,...a)=>{let r={};return a.forEach((e=>{s.add(r,e)})),e[t]=r,r}});var i=a(378),l=a(520);let c=[["position","size","home"],["position","size","home","blackhole"],["position","size","home","blanksquare"],["position","size","home","xsquare"],["position","size","home","arrowup"],["position","size","home","arrowright"],["position","size","home","arrowdown"],["position","size","home","arrowleft"],["position","size","home","neutronstar"]],u=!1,d=!1,p=0,f=!1,g=!1,h=!1;window.addEventListener("wheel",(e=>{f||(e.deltaX<=-1?h=!0:e.deltaX>=1&&(g=!0))}));let v=[],m=l.Z.load("solved")||[],w=l.Z.load("solutions")||{};const z=Object.freeze({update:(e,t,a,r)=>{if(!0===t.puzzle.init){t.puzzle.init=!1,v=[],e.tapstext.text.text=t.puzzle.taps?t.puzzle.taps+" moves":t.puzzle.taps;let a=e.level.state;a.draws=[],t.puzzle.grid.forEach(((t,r)=>{let o=r%6,s=r/6|0,i="piece"+r,l=n.add(e,i,...c[t]);l.position.x=l.home.x=16+48*o,l.position.y=l.home.y=62+48*s,a.draws.push(i),a.updates.push(i);let u="top"+r,d=n.add(e,u,...c[0]);d.position.x=d.home.x=16+48*o,d.position.y=d.home.y=62+48*s,a.draws.push(u),a.updates.push(u)})),void 0!==t.puzzle.text&&t.puzzle.text.forEach(((t,r,o)=>{let s="text"+r,i=n.add(e,s,"position","text");i.position.x=160,i.position.y=208-12*o.length+24*r,i.text.text=t,i.text.align="center",a.draws.push(s),a.updates.push(s);let l="top"+r;n.add(e,l,...c[0])}))}let o=e.game;if(h)return t.puzzle.lT?e.feedback.text.text=t.puzzle.lT:0===v.length?e.feedback.text.text="Back":e.feedback.text.text="Reset",u=!0,p=0,f=!0,void(h=!1);if(g)return t.puzzle.rT?e.feedback.text.text=t.puzzle.rT:e.feedback.text.text="Skip",d=!0,p=0,f=!0,void(g=!1);if(!f&&!0===o.pointer.isDown&&(v.length<t.puzzle.taps||t.puzzle.text)){let a=o.pointer.x-o.pointer.downX;o.canvas.oX=o.canvas.gX+a,o.canvas.oY=o.canvas.gY,a>48&&(t.puzzle.lT?e.feedback.text.text=t.puzzle.lT:0===v.length?e.feedback.text.text="Back":e.feedback.text.text="Reset"),a<-48&&(t.puzzle.rT?e.feedback.text.text=t.puzzle.rT:e.feedback.text.text="Skip")}else{let t=o.canvas.gX,a=1;if(p<=0&&d&&(t-=o.canvas.gW),p<=0&&u&&(t+=o.canvas.gW,a=-1),o.canvas.oX=o.canvas.oX+(t-o.canvas.oX)/6*r/17,o.canvas.oY=o.canvas.gY,p<=0&&(d||u)){if(Math.abs(t-o.canvas.oX)<1/e.game.canvas.zoom){let t=e.game.levels,r=l.Z.load("payed")?e.game.levels.coil:e.game.levels.sequence;(d||0===v.length)&&(t.current=Math.min(Math.max(t.current+a,0),r.length-1),l.Z.save("current",t.current));let s=r[t.current];e[s].puzzle.init=!0,e.level.state.updates=[s],o.canvas.oX=o.canvas.oX+2*o.canvas.gW*a,d=!1,u=!1}return}p>0?p-=r:Math.abs(t-o.canvas.oX)<1/e.game.canvas.zoom&&(f=!1)}if(!0===e.game.pointer.justUp){let a=o.pointer.x-o.pointer.downX;if(a>48)return u=!0,p=0,void(f=!0);if(a<-48)return d=!0,p=0,void(f=!0);let r=e.game.pointer.x-16-(e.game.canvas.gW-e.game.canvas.tW)/2,s=e.game.pointer.y-62-(e.game.canvas.gH-e.game.canvas.tH)/2;if(v.length>=t.puzzle.taps)return;if(r<0||r>288||s<0||s>288)return;r=r/48|0,s=s/48|0;let n=r+6*s,c={arrowup:e=>g(-6,35,0,e),arrowright:e=>g(1,n+(5-n%6),n-n%6,e),arrowdown:e=>g(6,35,0,e),arrowleft:e=>g(-1,n+(5-n%6),n-n%6,e),xsquare:t=>(t&&delete e["piece"+n].xsquare,1),neutronstar:t=>(t&&(delete e["piece"+n].neutronstar,e["piece"+n].blackhole={},e["top"+n].neutronstar={},e["top"+n].home.suck=!0),1)},g=(t,a,r,o=!0)=>{let s=e["piece"+n],i=n,l=[],c=!1;for(;!c;){if(s=e["piece"+i],!["blanksquare","xsquare","arrowup","arrowright","arrowdown","arrowleft","neutronstar"].some((e=>void 0!==s[e]))){void 0!==s.blackhole?l.unshift("top"+i):(l.unshift("top"+i),l.push("piece"+i)),c=!0;break}l.unshift("top"+i),l.push("piece"+i),i+=t,(i>a||i<r)&&(l=[],c=!0)}if(!o)return l.length;if(l.length<1)return 0;let u,d,p=l.shift(),f=e[p],g=f.home;return l.forEach((t=>{d=e[t],u=d.home,e[t]=f,e[t].home=u,f=d})),e[p]=f,e[p].home=g,e[p].home.suck=!0,l.length},h=e["piece"+n];Object.keys(c).forEach((a=>{if(h[a]){if(h.clicked=16,c[a](!0)>0){v.push(n);let e=[{neutronstar:"2b3",xsquare:"2C3",arrowup:"2e3",arrowright:"2a3",arrowdown:"2D3",arrowleft:"2G3"}[a]];i.Z.playSong({melody:e})}else{let e=[{neutronstar:"1b3",xsquare:"1C3",arrowup:"1e3",arrowright:"1a3",arrowdown:"1D3",arrowleft:"1G3"}[a]];i.Z.playSong({melody:e})}let r=t.puzzle.taps-v.length;if(e.tapstext.text.text=r+" moves",t.puzzle.grid.some(((t,a)=>["blanksquare","xsquare","arrowup","arrowright","arrowdown","arrowleft","neutronstar"].some((t=>void 0!==e["piece"+a][t])))))if(r<=0){u=!0,p=750,f=!0;let t=["4-","2e3","6a2"];i.Z.playSong({bass:t}),e.feedback.text.text="Out of moves!"}else if(t.puzzle.grid.some(((t,a)=>["xsquare","arrowup","arrowright","arrowdown","arrowleft","neutronstar"].some((t=>void 0!==e["piece"+a][t]))))){n=0;let t=!0;for(;n<36&&t;){let a=e["piece"+n];Object.keys(c).forEach((e=>{a[e]&&c[e](!1)>0&&(t=!1)})),n+=1}if(t){u=!0,p=750,f=!0;let t=["4-","4e3","6a2"];i.Z.playSong({bass:t}),e.feedback.text.text="Stuck"}}else{u=!0,p=750,f=!0;let t=["4-","4e3","6a2"];i.Z.playSong({bass:t}),e.feedback.text.text="Not clean..."}else{d=!0,p=750,f=!0;let t=["4-","2C3","2D3","4G3"];i.Z.playSong({melody:t}),e.feedback.text.text="Clean!";let a=e.game.levels,r=(l.Z.load("payed")?a.coil:a.sequence)[a.current];m.indexOf(r)<0&&(m.push(r),l.Z.save("solved",m)),void 0===w[r]&&(w[r]=[]);let o=JSON.stringify(v);-1===w[r].indexOf(o)&&(w[r].push(o),l.Z.save("solutions",w))}}}))}}})},106:(e,t,a)=>{var r={"./home.js":189,"./puzzle.js":282};function o(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=106},882:e=>{"use strict";e.exports={}},926:e=>{"use strict";e.exports={}},166:e=>{"use strict";e.exports={}},947:e=>{"use strict";e.exports={}},192:e=>{"use strict";e.exports={fill:"red"}},761:e=>{"use strict";e.exports={}},492:e=>{"use strict";e.exports={}},961:e=>{"use strict";e.exports=JSON.parse('{"w":320,"h":320,"tW":320,"tH":320,"gW":320,"gH":320,"zoom":1,"parentSelector":"body"}')},298:e=>{"use strict";e.exports={fill:"tomato"}},999:e=>{"use strict";e.exports=JSON.parse('{"x":0,"y":0,"drop":false,"suck":false}')},387:e=>{"use strict";e.exports=JSON.parse('{"sequence":[],"current":0}')},726:e=>{"use strict";e.exports={}},318:e=>{"use strict";e.exports={}},865:e=>{"use strict";e.exports=JSON.parse('{"x":0,"y":0,"downX":0,"downY":0,"justDown":false,"justUp":false,"isDown":false}')},43:e=>{"use strict";e.exports=JSON.parse('{"x":0,"y":0,"origin":"game"}')},37:e=>{"use strict";e.exports=JSON.parse('{"grid":[],"init":false,"text":[]}')},736:e=>{"use strict";e.exports={w:48,h:48}},135:e=>{"use strict";e.exports=JSON.parse('{"draws":[],"updates":[]}')},94:e=>{"use strict";e.exports={active:[]}},54:e=>{"use strict";e.exports={text:""}},893:e=>{"use strict";e.exports={fill:"red"}},224:e=>{"use strict";e.exports={}}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a(588)})();</script></body></html>