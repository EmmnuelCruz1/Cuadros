<!doctype html><html><head><meta charset="utf-8"><title>Black Hole Square</title><meta name="description" content="Clean the universe!"><meta name="author" content="Quinten"><meta name="monetization" content="$ilp.uphold.com/N3GyWXpENLq4"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="manifest" href="manifest.json"><meta name="theme-color" content="#0E181B"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="icon" type="image/png" href="icon.png"><link rel="apple-touch-icon" href="icon.png"><style>body {
                color: #F2F7F6;
                background-color: #0E181B;
                font-family: monospace;
                margin: 0;
                overflow: hidden;
            }

            html, body {
                height: 100%;
                position: relative;
            }

            @keyframes spin {
                100% {
                    transform:rotate(360deg);
                }
            }

            #loading {
                position: absolute;
                width: 32px;
                height: 32px;
                top: 50%;
                margin-top: -16px;
                left: 50%;
                margin-left: -16px;
                border: 4px #F2F7F6 solid;
                border-bottom: 4px transparent solid;
                border-radius: 22px;
                animation: spin 1s linear infinite;
            }</style></head><body><div id="loading"></div><script>(()=>{var e={895:(e,t,a)=>{var o={"./arrowdown.json":882,"./arrowleft.json":926,"./arrowright.json":166,"./arrowup.json":947,"./bgcut.json":192,"./blackhole.json":761,"./blanksquare.json":492,"./canvas.json":961,"./fillrect.json":298,"./home.json":999,"./levels.json":387,"./mask.json":726,"./pointer.json":865,"./position.json":43,"./puzzle.json":37,"./resetbutton.json":388,"./size.json":736,"./state.json":135,"./statemachine.json":94,"./text.json":54,"./tunnel.json":893,"./xsquare.json":224};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=s,e.exports=r,r.id=895},588:(e,t,a)=>{"use strict";let o={};var r;(r=a(106)).keys().forEach((e=>{let t=e.replace(/\.\/([^\/]+)\.js$/,"$1");o[t]=r(e).default}));const s=Object.freeze({process:(e,t,a,r)=>{t.forEach((t=>{let s=e[t];Object.keys(s).forEach((t=>{void 0!==o[t]&&o[t].update(e,s,a,r)}))}))}});let n={};(e=>{e.keys().forEach((t=>{let a=t.replace(/\.\/([^\/]+)\.js$/,"$1");n[a]=e(t).default}))})(a(293));let i={};(e=>{e.keys().forEach((t=>{let a=t.replace(/\.\/([^\/]+)\.js$/,"$1");i[a]=e(t).default}))})(a(98));const l=Object.freeze({process:(e,t,a)=>{t.forEach((t=>{let o=e[t];a.save(),a.scale(e.game.canvas.zoom,e.game.canvas.zoom),Object.keys(o).forEach((t=>{void 0!==i[t]&&i[t].transform(e,o,a)})),Object.keys(o).forEach((t=>{void 0!==n[t]&&n[t].draw(e,o,a)})),a.restore()}))}}),c=Object.freeze({add:(e,t)=>{if(void 0===e.canvas)return e;let a=0,o=1,r=1,s=s=>{clearTimeout(a),a=setTimeout((a=>{t.width=window.innerWidth*window.devicePixelRatio,t.height=window.innerHeight*window.devicePixelRatio,t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",e.canvas.w=t.width,e.canvas.h=t.height,o=e.canvas.tW/e.canvas.tH,r=e.canvas.w/e.canvas.h,o<r?(e.canvas.zoom=e.canvas.h/e.canvas.tH,e.canvas.gH=e.canvas.tH,e.canvas.gW=e.canvas.tH*e.canvas.w/e.canvas.h):(e.canvas.zoom=e.canvas.w/e.canvas.tW,e.canvas.gW=e.canvas.tW,e.canvas.gH=e.canvas.tW*e.canvas.h/e.canvas.w);let s=(e.canvas.gW-e.canvas.tW)/2,n=(e.canvas.gH-e.canvas.tH)/2;e.canvas.gX=s,e.canvas.gY=n}),40)};s(),window.addEventListener("resize",s)}});var u=a(378);const d=Object.freeze({add:(e,t)=>{let a,o,r,s,n,i,l=e.pointer,c=(e,t)=>{l.x=e,l.y=t,l.downX=e,l.downY=t,l.justDown=!0,l.isDown=!0},d=(e,t)=>{l.x=e,l.y=t},p=(e,t)=>{l.x=e,l.y=t,l.justUp=!0,l.isDown=!1};t.addEventListener("mousedown",(l=>{a=t.getBoundingClientRect(),o=a.left,r=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.clientX-o)/s,i=(l.clientY-r)/s,c(n,i)})),t.addEventListener("touchstart",(l=>{l.preventDefault(),a=t.getBoundingClientRect(),o=a.left,r=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.changedTouches[0].clientX-o)/s,i=(l.changedTouches[0].clientY-r)/s,c(n,i),u.Z.playSong({melody:["8-"]})})),t.addEventListener("mousemove",(l=>{a=t.getBoundingClientRect(),o=a.left,r=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.clientX-o)/s,i=(l.clientY-r)/s,d(n,i)})),t.addEventListener("touchmove",(l=>{l.preventDefault(),a=t.getBoundingClientRect(),o=a.left,r=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.changedTouches[0].clientX-o)/s,i=(l.changedTouches[0].clientY-r)/s,d(n,i)})),t.addEventListener("mouseup",(l=>{a=t.getBoundingClientRect(),o=a.left,r=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=(l.clientX-o)/s,i=(l.clientY-r)/s,p(n,i)})),t.addEventListener("touchend",(l=>{l.preventDefault(),a=t.getBoundingClientRect(),o=a.left,r=a.top,s=e.canvas.zoom/window.devicePixelRatio,n=l.changedTouches[0].clientX/s,i=l.changedTouches[0].clientY/s,p(n,i)}))}}),p=Object.freeze({setup:e=>{let t,a=e.game;if(void 0!==a.canvas){let e=document.createElement("canvas");t=e.getContext("2d");let o=document.querySelector(a.canvas.parentSelector);"body"===a.canvas.parentSelector?c.add(a,e):(e.width=a.canvas.w,e.height=a.canvas.h),o.appendChild(e);let r=document.querySelector("#loading");null!==r&&r.remove(),void 0!==a.pointer&&d.add(a,e)}if(void 0===a.statemachine||void 0===t)return;let o=0,r=0,n=i=>{r=i-o,o=i;let c=[],u=[];a.statemachine.active.forEach((t=>{let a=e[t];void 0!==a.state&&(c=[...c,...a.state.updates],u=[...u,...a.state.draws])})),s.process(e,c,i,r),void 0!==a.pointer&&(a.pointer.justDown=!1,a.pointer.justUp=!1),t.clearRect(0,0,a.canvas.w,a.canvas.h),l.process(e,u,t),requestAnimationFrame(n)};n(0)}}),f=JSON.parse('{"game":{"canvas":{"w":320,"h":416,"tW":320,"tH":416,"gW":320,"gH":416,"oX":0,"oY":48,"gX":0,"gY":48,"zoom":1,"parentSelector":"body"},"statemachine":{"active":["level","controls"]},"pointer":{"x":0,"y":0,"justDown":false,"justUp":false,"isDown":false},"levels":{"sequence":["groundzero","learnarrows","learnpush","learnmoves","makerows","firsttest","backtoback","breakflow","timebreak","xintohole","movex","shoveit"],"current":0}},"firsttest":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,0,0,0,5,2,0,1,0,0,0,1,2,0,0,0,0,0,1,0,0,0,0,0,0,0,0],"init":true,"taps":6}},"learnmoves":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,0,0,0,0,2,0,0,0,0,1,0,2,7,0,0,0,1,0,0,0,0,0,0,0,0,0],"init":true,"taps":5}},"learnarrows":{"puzzle":{"grid":[0,0,0,0,0,0,0,5,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,7,0,0,0,0,0,0,0],"init":true,"taps":6}},"learnpush":{"puzzle":{"grid":[0,0,0,0,0,0,0,6,0,0,1,0,0,0,0,0,0,0,0,2,0,0,2,0,0,1,0,0,4,0,0,0,0,0,0,0],"init":true,"taps":6}},"groundzero":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"init":true,"taps":2}},"breakflow":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,0,0,0,0,2,0,0,0,0,0,3,7,0,0,0,0,1,0,0,0,0,0,0,0,0,0],"init":true,"taps":5}},"timebreak":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,0,0,0,0,5,2,3,2,2,1,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"init":true,"taps":7}},"makerows":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,6,0,0,5,0,2,0,2,1,0,4,0,1,0,0,0,0,0,0,0,0],"init":true,"taps":7}},"xintohole":{"puzzle":{"grid":[0,0,0,0,0,0,0,1,0,0,6,0,3,3,0,0,2,0,0,2,0,0,3,3,0,4,0,0,1,0,0,0,0,0,0,0],"init":true,"taps":8}},"movex":{"puzzle":{"grid":[0,0,1,0,0,0,0,0,2,0,0,0,0,5,2,0,0,0,0,0,3,3,7,0,1,2,2,3,3,7,0,0,4,0,0,0],"init":true,"taps":16}},"backtoback":{"puzzle":{"grid":[0,0,0,0,0,0,0,0,6,0,0,0,1,5,0,0,0,0,0,0,0,0,7,1,0,0,0,4,0,0,0,0,0,0,0,0],"init":true,"taps":10}},"shoveit":{"puzzle":{"grid":[0,0,0,0,0,0,5,5,5,3,1,0,0,0,3,2,7,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"init":true,"taps":14}},"level":{"state":{"draws":[],"updates":["groundzero"]}},"controls":{"state":{"draws":["bgcut","bgout","tunnel","tapstext"],"updates":[]}},"resetbutton":{"position":{"x":0,"y":0,"origin":"canvas"},"resetbutton":{}},"tapstext":{"position":{"x":24,"y":72,"origin":"game"},"text":{"text":""}},"bgcut":{"position":{"x":16,"y":64,"origin":"game"},"bgcut":{"fill":"#1F363D"}},"bgout":{"position":{"x":16,"y":68,"origin":"game"},"bgcut":{"fill":"#16272C"}},"tunnel":{"tunnel":{"fill":"#16272C"}}}');p.setup(f),"serviceWorker"in navigator&&window.addEventListener("load",(e=>{navigator.serviceWorker.register("./sw.js").then((e=>{}),(e=>{}))}))},988:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(657);const r=Object.freeze({draw:(e,t,a)=>{o.default.draw(e,t,a);let r=new Path2D("M24 25.757l-9.879-9.878a3 3 0 00-4.242 4.242l12 12 .027.028a3.003 3.003 0 003.323.588l.034-.015.034-.016.033-.016.033-.017.032-.017.033-.017.032-.018.033-.018.032-.019.031-.019.032-.019.032-.02.031-.021.031-.02.031-.022.031-.021.03-.022.03-.023.03-.023.03-.023.03-.024.029-.024.029-.025.029-.025.028-.025.029-.026.028-.027.028-.026.027-.028 12-12a3 3 0 00-4.242-4.242L24 25.757z");a.fillStyle="#878e88",a.fill(r)}})},702:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(657);const r=Object.freeze({draw:(e,t,a)=>{o.default.draw(e,t,a);let r=new Path2D("M13.879 19.879l-.028.027a3.003 3.003 0 00-.49 3.521l.018.033.018.033.019.032.019.031.019.032.02.032.021.031.02.031.022.031.021.031.022.03.023.03.023.03.023.03.024.03.024.029.025.029.025.029.025.028.026.029.027.028.026.028.028.027 12 12a3 3 0 004.242-4.242L20.243 22l9.878-9.879a3 3 0 00-4.242-4.242l-12 12z");a.fillStyle="#878e88",a.fill(r)}})},515:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(657);const r=Object.freeze({draw:(e,t,a)=>{o.default.draw(e,t,a);let r=new Path2D("M27.757 22l-9.878 9.879a3 3 0 004.242 4.242l12-12a3 3 0 00.364-3.802l-.022-.032-.021-.031-.022-.03-.023-.03-.023-.03-.023-.03-.024-.03-.024-.029-.025-.029-.025-.029-.025-.028-.026-.029-.027-.028-.026-.028-.028-.027-12-12a3 3 0 00-4.242 4.242L27.757 22z");a.fillStyle="#878e88",a.fill(r)}})},666:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(657);const r=Object.freeze({draw:(e,t,a)=>{o.default.draw(e,t,a);let r=new Path2D("M22.507 11.397l-.035.021-.028.017-.032.019-.032.02-.031.021-.031.02-.031.022-.031.021-.03.022-.03.023-.03.023-.03.023-.03.024-.029.024-.029.025-.029.025-.028.025-.029.026-.028.027-.028.026-.027.028-12 12a3 3 0 004.242 4.242L24 18.243l9.879 9.878a3 3 0 004.242-4.242l-12-12a3.002 3.002 0 00-3.614-.482z");a.fillStyle="#878e88",a.fill(r)}})},833:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({draw:(e,t,a)=>{a.globalCompositeOperation="destination-over";let o=new Path2D("M6 288h276c3.311 0 6-2.689 6-6V6c0-3.311-2.689-6-6-6H6C2.689 0 0 2.689 0 6v276c0 3.311 2.689 6 6 6z");a.fillStyle=t.bgcut.fill,a.fill(o)}})},622:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({draw:(e,t,a)=>{let o=new Path2D("M44 12c0-3.311-2.689-6-6-6H10c-3.311 0-6 2.689-6 6v28c0 3.311 2.689 6 6 6h28c3.311 0 6-2.689 6-6V12z");a.fillStyle="#000",a.fill(o),o=new Path2D("M4 16c0-3.311 2.689-6 6-6h28c3.311 0 6 2.689 6 6v-4c0-3.311-2.689-6-6-6H10c-3.311 0-6 2.689-6 6v4z"),a.fillStyle="#16272C",a.fill(o)}})},657:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({draw:(e,t,a)=>{let o=new Path2D("M44 12c0-3.311-2.689-6-6-6H10c-3.311 0-6 2.689-6 6v28c0 3.311 2.689 6 6 6h28c3.311 0 6-2.689 6-6V12z");a.fillStyle="#c3dad5",a.fill(o),o=new Path2D("M44 8c0-3.311-2.689-6-6-6H10C6.689 2 4 4.689 4 8v28c0 3.311 2.689 6 6 6h28c3.311 0 6-2.689 6-6V8z"),a.fillStyle="#f2f7f6",a.fill(o)}})},768:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({draw:(e,t,a)=>{let o=e.game.canvas.gW,r=e.game.canvas.gH;void 0!==t.size&&(o=t.size.w,r=t.size.h),a.fillStyle=t.fillrect.fill,a.fillRect(0,0,o,r)}})},152:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({draw:(e,t,a)=>{let o=new Path2D("M5 24H4a3 3 0 00-2.121 5.121l4 4a2.998 2.998 0 004.242 0l4-4A3 3 0 0012 24h-1c0-7.175 5.825-13 13-13s13 5.825 13 13-5.825 13-13 13a3.001 3.001 0 000 6c10.486 0 19-8.514 19-19S34.486 5 24 5 5 13.514 5 24z");a.fillStyle="#f2f7f6",a.fill(o)}})},264:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({draw:(e,t,a)=>{a.textAlign="left",a.textBaseline="top",a.fillStyle="#f2f7f6",a.font="16px sans-serif",a.fillText(t.text.text,0,0)}})},339:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let o=400,r=[];for(let e=0;e<42;e++){let e={start:Math.random()*o*7,length:o+Math.random()*o*2,rotation:Math.random()*Math.PI*2};r.push(e)}Math.random();const s=Object.freeze({draw:(e,t,a)=>{a.globalCompositeOperation="destination-over",a.fillStyle=t.tunnel.fill,r.forEach((t=>{t.start-=8,t.start<-398&&(t.length=200+Math.random()*o/2,t.start=t.start+3200,t.rotation=Math.random()*Math.PI*2);let r=[{x:-1,y:80,z:t.start},{x:1,y:80,z:t.start},{x:1,y:80,z:Math.max(t.start-t.length,-399)},{x:-1,y:80,z:Math.max(t.start-t.length,-399)}],s=[];r.forEach((a=>{let[r,n]=((e,t,a,o=Math.cos(a),r=Math.sin(a))=>[o*e-r*t,r*e+o*t])(a.x,a.y,t.rotation);s.push(...((e,t,a,o,r,s,n=1,i=a/(a+s)*n)=>[e+o*i,t+r*i])(e.game.canvas.gW/2,e.game.canvas.gH/2,o,r,n,a.z))})),((e,t,a,o,r,s,n,i,l)=>{e.beginPath(),e.moveTo(t,a),e.lineTo(o,r),e.lineTo(s,n),e.lineTo(i,l),e.closePath(),e.fill()})(a,...s)}))}})},104:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(657);const r=Object.freeze({draw:(e,t,a)=>{o.default.draw(e,t,a);let r=new Path2D("M24 17.757l-9.879-9.878a3 3 0 00-4.242 4.242L19.757 22l-9.878 9.879a3 3 0 004.242 4.242L24 26.243l9.879 9.878a3 3 0 004.242-4.242L28.243 22l9.878-9.879a3 3 0 00-4.242-4.242L24 17.757z");a.fillStyle="#878e88",a.fill(r)}})},293:(e,t,a)=>{var o={"./arrowdown.js":988,"./arrowleft.js":702,"./arrowright.js":515,"./arrowup.js":666,"./bgcut.js":833,"./blackhole.js":622,"./blanksquare.js":657,"./fillrect.js":768,"./resetbutton.js":152,"./text.js":264,"./tunnel.js":339,"./xsquare.js":104};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=s,e.exports=r,r.id=293},378:(e,t,a)=>{"use strict";let o,r;a.d(t,{Z:()=>s});const s=Object.freeze({playSong:(e={})=>{let t=(e,t,a,o=120,r="square")=>{if("closed"===e.context.state)return;let s=t.replace(/\d/g,""),n=t.match(/^\d+/g);n=n?+n[0]:4;let i=t.match(/\d+$/g);i=i?+i[0]:4;let l=15/o*n,c="AbBCdDeEFgGa".indexOf(s);if(-1===c)return l;let u=100*c+1200*(i-4),d=e.context.createOscillator();return d.connect(e),d.frequency.value=440,d.detune.value=u,d.type=r,e.gain.setValueAtTime(0,a),e.gain.linearRampToValueAtTime(.2,a+.03*l),e.gain.setValueAtTime(.2,a+.3*l),e.gain.linearRampToValueAtTime(0,a+1.5*l),d.start(a),d.stop(a+1.5*l),l},{melody:a,bass:s,bpm:n=240,loop:i=!1}=e,l=!a,c=!s;if(void 0===o||"running"!==o.state){o=new AudioContext;let e=o.createBiquadFilter();e.connect(o.destination),e.type="lowpass",e.frequency.value=920;let t=o.createGain();t.connect(e),t.gain.value=.5;let a=o.createDelay(60/n);a.delayTime.value=60/n;let s=o.createGain();s.gain.value=.15,s.connect(t),a.connect(s),r=[0,1,2,3,4,5,6,7].map((()=>{let e=o.createGain();return e.connect(t),e.connect(a),e}))}let u=0,d=0,p=0,f=0,v=0,h=60/n*7,g=0,w=()=>{if("closed"!==o.state&&!(0!==g&&o.currentTime>g)){for((!l&&o.currentTime>p+1||!c&&o.currentTime>v+1)&&(d=0,f=0,p=v=o.currentTime);!l&&p<o.currentTime+h;){let e=t(r[u],a[d],p,n,"sine");u=(u+1)%r.length,d=(d+1)%a.length,p+=e,0===d&&(i||(l=!0)),g=g<p+h?p+h:g}for(;!c&&v<o.currentTime+h;){let e=t(r[u],s[f],v,n,"triangle");u=(u+1)%r.length,f=(f+1)%s.length,v+=e,0===f&&(i||(c=!0)),g=g<v+h?v+h:g}requestAnimationFrame(w)}};return w(),o}})},272:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({transform:(e,t,a)=>{a.globalCompositeOperation="source-atop"}})},130:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({transform:(e,t,a)=>{let o=0,r=0;if("game"===t.position.origin){let t=e.game.canvas;o=t.oX,r=t.oY}a.translate(t.position.x+o,t.position.y+r)}})},98:(e,t,a)=>{var o={"./mask.js":272,"./position.js":130};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=s,e.exports=r,r.id=98},189:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({update:(e,t,a,o)=>{if(void 0!==t.position){t.position.x=t.position.x+(t.home.x-t.position.x)/3*o/17,Math.abs(t.home.x-t.position.x)<1/e.game.canvas.zoom&&(t.position.x=t.home.x);let a=t.home.y;t.home.drop&&(a+=48),t.position.y=t.position.y+(a-t.position.y)/3*o/17,Math.abs(a-t.position.y)<1/e.game.canvas.zoom&&(t.position.y=a,t.home.drop&&(delete t.mask,["blanksquare","xsquare","arrowup","arrowright","arrowdown","arrowleft"].forEach((e=>{delete t[e]})),t.home.drop=!1)),t.position.x===t.home.x&&t.position.y===t.home.y&&t.home.suck&&(t.mask={},t.home.suck=!1,t.home.drop=!0)}}})},282:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});let o={};var r;(r=a(895)).keys().forEach((e=>{let t=e.replace(/\.\/(.+)\.json$/,"$1");o[t]=r(e)}));const s=Object.freeze({add:(e,t)=>(e[t]=JSON.parse(JSON.stringify(o[t])),e)}),n=Object.freeze({add:(e,t,...a)=>{let o={};return a.forEach((e=>{s.add(o,e)})),e[t]=o,o}});var i=a(378);let l=[["position","size","home"],["position","size","home","blackhole"],["position","size","home","blanksquare"],["position","size","home","xsquare"],["position","size","home","arrowup"],["position","size","home","arrowright"],["position","size","home","arrowdown"],["position","size","home","arrowleft"],["position","size","home","fillrect"]],c=!1,u=!1,d=0,p=[];const f=Object.freeze({update:(e,t,a,o)=>{if(!0===t.puzzle.init){t.puzzle.init=!1,p=[],e.tapstext.text.text=""+t.puzzle.taps;let a=e.level.state;a.draws=[],t.puzzle.grid.forEach(((t,o)=>{let r=o%6,s=o/6|0,i="piece"+o,c=n.add(e,i,...l[t]);c.position.x=c.home.x=16+48*r,c.position.y=c.home.y=62+48*s,a.draws.push(i),a.updates.push(i);let u="top"+o,d=n.add(e,u,...l[0]);d.position.x=d.home.x=16+48*r,d.position.y=d.home.y=62+48*s,a.draws.push(u),a.updates.push(u)}))}let r=e.game;if(!0===r.pointer.isDown&&p.length<t.puzzle.taps)r.canvas.oX=r.canvas.gX+(r.pointer.x-r.pointer.downX),r.canvas.oY=r.canvas.gY;else{let t=r.canvas.gX,a=1;if(d<=0&&u&&(t-=r.canvas.gW),d<=0&&c&&(t+=r.canvas.gW,a=-1),r.canvas.oX=r.canvas.oX+(t-r.canvas.oX)/6*o/17,r.canvas.oY=r.canvas.gY,d<=0&&(u||c)){if(Math.abs(t-r.canvas.oX)<1/e.game.canvas.zoom){let t=e.game.levels;(u||0===p.length)&&(t.current=(t.current+a+t.sequence.length)%t.sequence.length);let o=t.sequence[t.current];e[o].puzzle.init=!0,e.level.state.updates=[o],r.canvas.oX=r.canvas.oX+2*r.canvas.gW*a,u=!1,c=!1}return}d-=o}if(!0===e.game.pointer.justUp){let a=r.pointer.x-r.pointer.downX;if(a>48)return c=!0,void(d=0);if(a<-48)return u=!0,void(d=0);let o=e.game.pointer.x-16-(e.game.canvas.gW-e.game.canvas.tW)/2,s=e.game.pointer.y-62-(e.game.canvas.gH-e.game.canvas.tH)/2;if(p.length>=t.puzzle.taps)return;if(o<0||o>288||s<0||s>288)return;o=o/48|0,s=s/48|0;let n=o+6*s,l={arrowup:e=>f(-6,35,0),arrowright:e=>f(1,n+(5-n%6),n-n%6),arrowdown:e=>f(6,35,0),arrowleft:e=>f(-1,n+(5-n%6),n-n%6),xsquare:t=>(delete e["piece"+n].xsquare,1)},f=(t,a,o)=>{let r=e["piece"+n],s=n,i=[],l=!1;for(;!l;){if(r=e["piece"+s],!["blanksquare","xsquare","arrowup","arrowright","arrowdown","arrowleft"].some((e=>void 0!==r[e]))){void 0!==r.blackhole?i.unshift("top"+s):(i.unshift("top"+s),i.push("piece"+s)),l=!0;break}i.unshift("top"+s),i.push("piece"+s),s+=t,(s>a||s<o)&&(i=[],l=!0)}if(i.length<1)return 0;let c,u,d=i.shift(),p=e[d],f=p.home;return i.forEach((t=>{u=e[t],c=u.home,e[t]=p,e[t].home=c,p=u})),e[d]=p,e[d].home=f,e[d].home.suck=!0,i.length},v=e["piece"+n];Object.keys(l).forEach((a=>{if(v[a]){if(l[a]()>0){p.push(n);let e=[{xsquare:"2C4",arrowup:"2e4",arrowright:"2a4",arrowdown:"2D4",arrowleft:"2G4"}[a]];i.Z.playSong({melody:e})}else{let e=[{xsquare:"1C4",arrowup:"1e4",arrowright:"1a4",arrowdown:"1D4",arrowleft:"1G4"}[a]];i.Z.playSong({melody:e})}let o=t.puzzle.taps-p.length;if(e.tapstext.text.text=""+o,t.puzzle.grid.some(((t,a)=>["blanksquare","xsquare","arrowup","arrowright","arrowdown","arrowleft"].some((t=>void 0!==e["piece"+a][t]))))){if(o<=0){c=!0,d=750;let e=["4-","2e3","6a2"];i.Z.playSong({bass:e})}else if(!t.puzzle.grid.some(((t,a)=>["xsquare","arrowup","arrowright","arrowdown","arrowleft"].some((t=>void 0!==e["piece"+a][t]))))){c=!0,d=750;let e=["4-","4e3","6a2"];i.Z.playSong({bass:e})}}else{u=!0,d=750;let e=["4-","2C4","2D4","4G4"];i.Z.playSong({melody:e})}}}))}}})},632:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});const o=Object.freeze({update:(e,t,a,o)=>{void 0!==t.position&&(t.position.x=e.game.canvas.gW-48,t.position.y=0);let r=e.game.pointer;if(r.justUp){if(r.x<t.position.x||r.y>t.position.y+48)return;let a=e.game.levels,o=a.sequence[a.current];e[o].puzzle.init=!0,e.level.state.updates=[o]}}})},106:(e,t,a)=>{var o={"./home.js":189,"./puzzle.js":282,"./resetbutton.js":632};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=s,e.exports=r,r.id=106},882:e=>{"use strict";e.exports={}},926:e=>{"use strict";e.exports={}},166:e=>{"use strict";e.exports={}},947:e=>{"use strict";e.exports={}},192:e=>{"use strict";e.exports={fill:"red"}},761:e=>{"use strict";e.exports={}},492:e=>{"use strict";e.exports={}},961:e=>{"use strict";e.exports=JSON.parse('{"w":320,"h":320,"tW":320,"tH":320,"gW":320,"gH":320,"zoom":1,"parentSelector":"body"}')},298:e=>{"use strict";e.exports={fill:"tomato"}},999:e=>{"use strict";e.exports=JSON.parse('{"x":0,"y":0,"drop":false,"suck":false}')},387:e=>{"use strict";e.exports=JSON.parse('{"sequence":[],"current":0}')},726:e=>{"use strict";e.exports={}},865:e=>{"use strict";e.exports=JSON.parse('{"x":0,"y":0,"downX":0,"downY":0,"justDown":false,"justUp":false,"isDown":false}')},43:e=>{"use strict";e.exports=JSON.parse('{"x":0,"y":0,"origin":"game"}')},37:e=>{"use strict";e.exports=JSON.parse('{"grid":[],"init":false}')},388:e=>{"use strict";e.exports={}},736:e=>{"use strict";e.exports={w:48,h:48}},135:e=>{"use strict";e.exports=JSON.parse('{"draws":[],"updates":[]}')},94:e=>{"use strict";e.exports={active:[]}},54:e=>{"use strict";e.exports={text:""}},893:e=>{"use strict";e.exports={fill:"red"}},224:e=>{"use strict";e.exports={}}},t={};function a(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,a),s.exports}a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a(588)})();</script></body></html>